import React,{useState} from 'react'; import type { Timeline } from '../types'; import { postJSON } from '../lib/api'; const REDACTION_ITEMS=['Attorneyâ€“client / work product','Personnel/medical privacy','Law-enforcement investigations','Security-sensitive infrastructure','IDs (SSN/DL), DOB, financial','Personal contact info','Trade secrets / proprietary','Juvenile/student/protected victims','Settlement/mediation','Deliberative process','Prepare redaction log']; export default function TasksAndChecklist({matterId,tl,recipients}:{matterId:string,tl:Timeline,recipients:string[]}){ const [checked,setChecked]=useState(REDACTION_ITEMS.map(()=>false)); const [ics,setIcs]=useState<string|null>(null); async function sync(){ const res=await postJSON('/api/tasks/sync',{matterId, timeline:tl, assignees:[], email:{send:false,to:recipients}}); setIcs(res.icsFileBase64);} return <div className='grid grid-cols-2 gap-6'><div><h2 className='font-semibold mb-2'>Redaction Checklist</h2><ul className='space-y-2'>{REDACTION_ITEMS.map((item,i)=>(<li key={i} className='flex items-center gap-2'><input type='checkbox' checked={checked[i]} onChange={()=>setChecked(prev=>prev.map((v,idx)=>idx===i?!v:v))} /><span>{item}</span></li>))}</ul></div><div><h2 className='font-semibold mb-2'>Task Sync</h2><p className='text-sm text-gray-600 mb-2'>Creates calendar holds and returns an ICS file you can import.</p><button className='btn-primary' onClick={sync}>Create Events & Get ICS</button>{ics && <div className='mt-3'><a download='cpra_events.ics' href={`data:text/calendar;base64,${ics}`} className='underline text-blue-700'>Download ICS</a></div>}</div></div> }