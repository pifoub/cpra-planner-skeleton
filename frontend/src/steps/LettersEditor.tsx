import React,{useEffect,useState} from 'react'; import { postJSON } from '../lib/api'; import type { CPRARequest, Timeline, LetterKind } from '../types'; export default function LettersEditor({req,tl,onAccept}:{req:CPRARequest,tl:Timeline,onAccept:()=>void}){ const [kind,setKind]=useState<LetterKind>('ack'); const [html,setHtml]=useState(''); useEffect(()=>{(async()=>{ const data=await postJSON(`/api/letters/${kind==='ack'?'ack':'extension'}`,{request:req,timeline:tl,agency:{signatureBlock:'City Clerk'}}); setHtml(data.html); })()},[kind,req,tl]); return <div className='space-y-3'><div className='flex gap-2'><button className={'btn '+(kind==='ack'?'bg-blue-600 text-white':'')} onClick={()=>setKind('ack')}>Acknowledgment</button><button className={'btn '+(kind==='extension'?'bg-blue-600 text-white':'')} onClick={()=>setKind('extension')}>Extension</button></div><textarea className='w-full border p-3 h-64' value={html} onChange={e=>setHtml(e.target.value)}></textarea><div className='flex justify-end'><button className='btn-primary' onClick={onAccept}>Accept Letter</button></div></div> }